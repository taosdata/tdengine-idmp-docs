# 数据备份与恢复

TDengine IDMP 的备份恢复功能允许用户定期备份数据和配置，以防止数据丢失或损坏。用户可以根据需要恢复到特定的备份点。

## 数据备份

在整个页面右上角的头像的弹出菜单中，点击“管理后台”，进入到“管理后台”页面。然后点击“数据备份”按钮，进入“数据备份”主页面。

### 配置

- 用户可选择两种备份策略：一是按小时级时间间隔执行备份，二是指定每日的具体时刻执行备份。
- 配置备份文件的保留数量，用户可依据磁盘可用容量合理设定，避免因备份文件过量占用存储空间。
- 配置备份文件的存储目录路径，用于指定备份数据的保存位置。

### 备份信息

- 配置完成后，系统将根据配置启动备份。
- 数据备份查看页面会展示备份配置信息、当前备份状态（如“备份中”“已停止”），以及已生成的备份文件详情。
- 数据备份页面右侧设有启动和停止按钮，方便用户随时操作备份任务的启停。

## 数据恢复

1. 停止 IDMP 服务进程，避免恢复过程中数据读写冲突；
1. 查阅安装目录下 `config/application.yml` 配置文件，定位数据存储（data）目录路径，并对该目录进行备份（防止恢复操作异常导致原始数据丢失）；
1. 进入数据备份存储目录，检索并核验待恢复的目标备份文件（需核对文件生成时间、完整性校验值等信息，确保备份文件有效且匹配恢复需求）；
1. 将核验通过的目标备份文件解压至步骤 2 中定位的数据目录下（解压前确认目录读写权限，确保操作可执行）；
1. 重新启动 IDMP 服务进程，使恢复后的数据生效；
1. 验证恢复结果：登录 IDMP 系统，核查核心业务数据、配置信息等是否与备份时点一致，确认数据恢复准确且可用。
